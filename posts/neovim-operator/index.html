<!doctype html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Neovim Operator 操作指南 - leo9827</title><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;700&display=swap" rel=stylesheet><link rel=stylesheet href=/scss/index.min.css></head><body><header id=header-main class=header-main><div class=header-inner><div class=header-brand><a href=/>~/</a></div><nav class=header-nav><ul></ul></nav><div class=header-social-icons><a href=#><i class="fab fa-github"></i></a>
<a href=#><i class="fab fa-twitter"></i></a>
<a href=#><i class="fas fa-envelope"></i></a>
<a href=#><i class="fa-brands fa-medium"></i></a></div></div></header><main class=wrapper><div id=post class=post><article class=post-single><header class=post-title><h1>Neovim Operator 操作指南</h1></header><p><small>Post on&nbsp;February 15, 2025&nbsp;
·&nbsp;3230 words&nbsp;
·&nbsp;reading time 2 min</small><p><div class=post-toc><nav id=TableOfContents><ul><li><ul><li><a href=#常见的-neovim-operator-列表><strong>常见的 Neovim Operator 列表</strong></a></li><li><a href=#operator-的使用模式><strong>Operator 的使用模式</strong></a></li><li><a href=#常用操作符>常用操作符</a></li><li><a href=#操作符与文本对象的结合>操作符与文本对象的结合</a></li><li><a href=#其他操作符>其他操作符</a></li><li><a href=#更多示例>更多示例</a></li><li><a href=#如何使用操作符>如何使用操作符</a></li><li><a href=#与窗口操作相关的操作符>与窗口操作相关的操作符</a></li><li><a href=#与折叠相关的操作符>与折叠相关的操作符</a></li><li><a href=#其它常用操作符>其它常用操作符</a></li><li><a href=#结合文本对象使用>结合文本对象使用</a></li><li><a href=#小技巧>小技巧</a></li><li><a href=#扩展自定义-operator><strong>扩展/自定义 Operator</strong></a></li></ul></li></ul></nav><br></div><section class=post-content><p>关于 Neovim/Vim 中 Operator（操作符）的详细指南，包含常用操作符、文本编辑和高级操作技巧。</p><p>在 <strong>Neovim</strong> 中，&ldquo;operator&rdquo; 是一种对文本进行操作的命令，比如复制、删除、修改等。Operator 通常与 <strong>motion</strong>（动作，如移动光标到某个位置）配合使用，用来指定操作的范围。例如：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-vim data-lang=vim><span class=line><span class=cl><span class=nx>d</span>$  # <span class=s2>&#34;d&#34;</span> <span class=nx>是</span> <span class=nx>operator</span>（<span class=nx>删除</span>），<span class=s2>&#34;$&#34;</span> <span class=nx>是</span> <span class=nx>motion</span>（<span class=nx>移动到行尾</span>）
</span></span></code></pre></div><p>注：operator 不一定是单个键（如<code>d</code>，<code>y</code>），也可以是多个键触发（如<code>g~</code>，<code>gu</code>）</p><p>以下是 Neovim 支持的主要 <strong>operators</strong>：</p><hr><h3 id=常见的-neovim-operator-列表><strong>常见的 Neovim Operator 列表</strong></h3><table><thead><tr><th><strong>Operator</strong></th><th><strong>描述</strong></th><th><strong>示例</strong></th><th><strong>含义</strong></th></tr></thead><tbody><tr><td><code>d</code></td><td>删除指定范围内的文本</td><td><code>dw</code></td><td>删除当前单词</td></tr><tr><td><code>y</code></td><td>复制（yank）指定范围内的文本</td><td><code>y$</code></td><td>复制从光标到行尾的内容</td></tr><tr><td><code>c</code></td><td>删除指定范围内的文本并进入插入模式</td><td><code>ciw</code></td><td>删除当前单词并进入插入模式</td></tr><tr><td><code>></code></td><td>增加缩进</td><td><code>>ap</code></td><td>增加当前段落的缩进</td></tr><tr><td><code>&lt;</code></td><td>减少缩进</td><td><code>&lt;ip</code></td><td>减少当前段落的缩进</td></tr><tr><td><code>=</code></td><td>自动对齐</td><td><code>=G</code></td><td>对从光标到文档末尾的文本自动对齐</td></tr><tr><td><code>!</code></td><td>使用外部命令处理文本</td><td><code>!iw sort</code></td><td>对当前单词用 <code>sort</code> 命令排序（会报错，适用更大范围如行）</td></tr><tr><td><code>z</code></td><td>折叠/展开相关的操作符</td><td><code>zfa}</code></td><td>折叠直到下一个 <code>{}</code></td></tr><tr><td><code>zf</code></td><td>折叠（fold）指定范围的文本</td><td><code>zf%</code></td><td>折叠当前括号内的文本</td></tr><tr><td><code>~</code></td><td>切换大小写（单字符）</td><td><code>~iw</code></td><td>切换当前单词的大小写</td></tr><tr><td><code>g~</code></td><td>切换大小写（大小写互转）</td><td><code>g~w</code></td><td>切换当前单词的大小写</td></tr><tr><td><code>gu</code></td><td>将文本转为小写</td><td><code>guG</code></td><td>将光标到文档末尾的文本转为小写</td></tr><tr><td><code>gU</code></td><td>将文本转为大写</td><td><code>gUw</code></td><td>将当前单词转为大写</td></tr><tr><td><code>gq</code></td><td>格式化文本（使用 <code>formatprg</code> 或内置规则）</td><td><code>gqap</code></td><td>格式化当前段落</td></tr><tr><td><code>g@</code></td><td>执行用户定义的操作（例如宏）</td><td><code>g@iw</code></td><td>对当前单词应用上一次宏定义</td></tr><tr><td><code>g&lt;C-a></code></td><td>递增操作</td><td><code>g&lt;C-a>w</code></td><td>递增当前单词中的数字</td></tr><tr><td><code>g&lt;C-x></code></td><td>递减操作</td><td><code>g&lt;C-x>w</code></td><td>递减当前单词中的数字</td></tr><tr><td>在 Vim 中，由大写字母来触发的操作也有很多：</td><td></td><td></td><td></td></tr></tbody></table><ol><li><strong>I</strong> - 在行首进入插入模式。</li><li><strong>A</strong> - 在行尾进入插入模式。</li><li><strong>O</strong> - 在当前行上方插入新行并进入插入模式。</li><li><strong>X</strong> - 删除光标前的字符。</li><li><strong>D</strong> - 删除从光标位置到行尾的内容。</li><li><strong>C</strong> - 删除从光标位置到行尾的内容，并进入插入模式。</li><li><strong>S</strong> - 删除当前行并进入插入模式。</li><li><strong>J</strong> - 将当前行与下一行合并。</li><li><strong>R</strong> - 进入替换模式。</li><li><strong>P</strong> - 在光标前粘贴剪切板内容。</li><li><strong>B</strong> - 移动光标到当前单词的开头（忽略标点符号）。</li><li><strong>W</strong> - 移动光标到下一个单词的开头（忽略标点符号）。</li><li><strong>E</strong> - 移动光标到当前单词的结尾（忽略标点符号）。</li><li><strong>G</strong> - 移动光标到文件的末尾。</li><li><strong>H</strong> - 移动光标到屏幕的顶部。</li><li><strong>M</strong> - 移动光标到屏幕的中间。</li><li><strong>L</strong> - 移动光标到屏幕的底部。</li><li><strong>F</strong> - 向左查找字符，并移动光标到该字符位置。</li><li><strong>T</strong> - 向左查找字符，并移动光标到该字符的前一个位置。</li><li><strong>K</strong> - 查找光标下单词的帮助文档。</li><li><strong>N</strong> - 进行上一次搜索的反向搜索。</li><li><strong>Q</strong> - 进入 Ex 模式。</li><li><strong>U</strong> - 撤销当前行的所有更改。</li><li><strong>V</strong> - 进入可视行模式。</li><li><strong>Y</strong> - 复制当前行。</li><li><strong>Z</strong> - 保存并退出（ZZ）。</li></ol><hr><h3 id=operator-的使用模式><strong>Operator 的使用模式</strong></h3><ol start=27><li><strong>单独使用</strong>：<ul><li>直接指定一个 motion 来操作：</li></ul></li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-vim data-lang=vim><span class=line><span class=cl><span class=nx>d</span>$  # <span class=nx>删除到行尾</span>
</span></span><span class=line><span class=cl><span class=nx>yG</span>  # <span class=nx>复制到文档末尾</span>
</span></span></code></pre></div><ol start=28><li><strong>配合 text-object 使用</strong>：<ul><li>Text-object 是一组描述范围的对象（如单词、句子、段落等），常用如下：</li></ul></li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-vim data-lang=vim><span class=line><span class=cl><span class=nx>diw</span>  # <span class=nx>删除当前单词</span>
</span></span><span class=line><span class=cl><span class=nx>ci</span>&#34;  # <span class=nx>删除当前引号内的内容并进入插入模式</span>
</span></span><span class=line><span class=cl><span class=nx>yip</span>  # <span class=nx>复制当前段落</span>
</span></span></code></pre></div><ol start=29><li><strong>配合行范围使用</strong>：<ul><li>操作整个行或多行：</li></ul></li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-vim data-lang=vim><span class=line><span class=cl><span class=nx>dd</span>   # <span class=nx>删除当前行</span>
</span></span><span class=line><span class=cl><span class=nx>y2j</span>  # <span class=nx>复制当前行及接下来的两行</span>
</span></span></code></pre></div><h3 id=常用操作符>常用操作符</h3><ul><li><strong>d（delete）：</strong> 删除文本。<ul><li><code>dw</code>：删除一个单词</li><li><code>db</code>：删除到前一个单词的开头</li><li><code>diw</code>：删除内部的单词（不包括空格）</li><li><code>daw</code>：删除一个单词（包括空格）</li><li><code>dt)</code>：删除到下一个右括号</li></ul></li><li><strong>y（yank）：</strong> 复制文本到寄存器<ul><li><code>yw</code>：复制一个单词</li><li><code>yy</code>：复制一行</li></ul></li><li><strong>c（change）：</strong> 修改文本<ul><li><code>cw</code>：修改一个单词</li><li><code>cc</code>：修改整行</li></ul></li><li><strong>>（shift right）：</strong> 向右缩进</li><li><strong>&lt;（shift left）：</strong> 向左缩进</li><li><strong>~（swap case）：</strong> 大小写转换</li><li><strong>gu（lowercase）：</strong> 转为小写</li><li><strong>gU（uppercase）：</strong> 转为大写</li></ul><h3 id=操作符与文本对象的结合>操作符与文本对象的结合</h3><p>操作符的真正威力在于与文本对象的结合。文本对象可以是单词、句子、段落等。例如：</p><ul><li><code>daw</code>：删除一个单词（包括空格）</li><li><code>dib</code>：删除一个括号内的内容</li><li><code>yip</code>：复制一个段落</li></ul><h3 id=其他操作符>其他操作符</h3><p>除了上述常用的操作符，Vim 还提供了许多其他操作符，用于执行更复杂的操作，例如：</p><ul><li><strong>=（equal）：</strong> 自动缩进</li><li><strong>!（filter）：</strong> 通过外部命令过滤文本</li><li><strong>J（join）：</strong> 合并行</li></ul><h3 id=更多示例>更多示例</h3><ul><li><strong>删除当前行到行尾：</strong> <code>D</code></li><li><strong>修改当前行：</strong> <code>C</code></li><li><strong>删除当前字符：</strong> <code>x</code></li><li><strong>删除当前字符前的字符：</strong> <code>X</code></li></ul><h3 id=如何使用操作符>如何使用操作符</h3><ol start=30><li><strong>选择文本对象：</strong> 使用 <code>w</code>、<code>b</code>、<code>e</code> 等字符来选择单词、括号等文本对象。</li><li><strong>指定操作符：</strong> 在文本对象前面加上操作符，例如 <code>dw</code>、<code>cc</code>。</li><li><strong>执行命令：</strong> 按下回车键执行命令。</li></ol><h3 id=与窗口操作相关的操作符>与窗口操作相关的操作符</h3><ul><li><strong>z:</strong><ul><li><strong>z-:</strong> 将当前行移到窗口顶部。</li><li><strong>z.:</strong> 将当前行移到窗口底部。</li><li><strong>zt:</strong> 将当前行移到窗口中间。</li><li><strong>zz:</strong> 将当前行移到窗口的中间，同时调整窗口大小，使当前行位于窗口的中间。</li></ul></li></ul><h3 id=与折叠相关的操作符>与折叠相关的操作符</h3><ul><li><strong>zf:</strong> 将当前行折叠成一个折叠。</li><li><strong>zo:</strong> 打开一个折叠。</li><li><strong>zc:</strong> 关闭一个折叠。</li><li><strong>za:</strong> 交替打开或关闭一个折叠。</li></ul><h3 id=其它常用操作符>其它常用操作符</h3><ul><li><strong>=:</strong> 自动缩进当前行或选中的文本。</li><li><strong>>:</strong> 向右缩进。</li><li><strong>&lt;:</strong> 向左缩进。</li><li><strong>~:</strong> 将当前字符的大小写转换。</li><li><strong>gu:</strong> 将选中的文本转换为小写。</li><li><strong>gU:</strong> 将选中的文本转换为大写。</li><li><strong>J:</strong> 合并当前行和下一行。</li><li><strong>P:</strong> 在当前行上方粘贴。</li><li><strong>p:</strong> 在当前行下方粘贴。</li><li><strong>r:</strong> 替换当前字符。</li><li><strong>s:</strong> 删除当前字符并进入插入模式。</li><li><strong>S:</strong> 删除整行并进入插入模式。</li></ul><h3 id=结合文本对象使用>结合文本对象使用</h3><p>这些操作符可以与各种文本对象结合使用，例如：</p><ul><li><code>daw</code>：删除一个单词（包括空格）</li><li><code>dib</code>：删除一个括号内的内容</li><li><code>yip</code>：复制一个段落</li><li><code>zfap</code>：折叠整个段落</li></ul><h3 id=小技巧>小技巧</h3><ul><li><strong>数字重复:</strong> 在操作符前面加上数字可以重复执行操作，例如 <code>2dd</code> 删除两行。</li><li><strong>. 命令重复:</strong> 点号（.）可以重复上一次的普通模式命令。</li></ul><hr><h3 id=扩展自定义-operator><strong>扩展/自定义 Operator</strong></h3><ol start=33><li><strong>插件支持</strong>：<ul><li>一些插件提供额外的 operators，例如：<ul><li><strong>vim-commentary</strong>：增加注释操作，如 <code>gcc</code>。</li><li><strong>vim-surround</strong>：提供更灵活的 <code>ys</code> 等操作。</li></ul></li></ul></li><li><strong>自定义操作</strong>：<ul><li>使用 Vim 脚本或 Lua，可以定义自己的 operator。例如：</li></ul></li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-vim data-lang=vim><span class=line><span class=cl><span class=c>&#34; 定义一个删除并打印文本的 operator</span>
</span></span><span class=line><span class=cl><span class=nx>nnoremap</span> <span class=p>&lt;</span><span class=nx>leader</span><span class=p>&gt;</span><span class=nx>d</span> :<span class=nx>call</span> <span class=nx>DeleteAndPrint</span><span class=p>()&lt;</span><span class=nx>CR</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=k>function</span><span class=p>!</span> <span class=nx>DeleteAndPrint</span><span class=p>()</span>
</span></span><span class=line><span class=cl>	<span class=k>execute</span> <span class=s2>&#34;normal! \&#34;_dd&#34;</span>
</span></span><span class=line><span class=cl>	<span class=nx>echo</span> <span class=s2>&#34;Line deleted&#34;</span>
</span></span><span class=line><span class=cl><span class=k>endfunction</span>
</span></span></code></pre></div><ul><li>Neovim 提供了丰富的内置 operators，适用于各种文本操作场景。</li><li>通过结合 motions 和 text-objects，操作范围可以精确到字符、单词、句子、段落，甚至文件。</li><li>如果内置的 operators 不够用，你可以通过插件或自定义脚本扩展功能。</li></ul></section><br><p><small>Post on&nbsp;February 15, 2025&nbsp;
·&nbsp;384 words&nbsp;</small><p><hr><div class=page-nav><a class=page-prev href=https://leo9827.github.io/posts/neovimvim-%E4%B8%AD%E7%9A%84%E8%B7%B3%E8%BD%AC%E6%93%8D%E4%BD%9C/><i class="fa-solid fa-arrow-left"></i>&nbsp;&nbsp;
<span>Neovim(Vim) 中的跳转操作</span></a>
<a class=page-next href=https://leo9827.github.io/posts/neovim%E6%93%8D%E4%BD%9C%E6%8C%87%E5%8D%97/><span>Neovim 操作指南</span>
&nbsp;&nbsp;<i class="fa-solid fa-arrow-right"></i></a></div><div class=comments><script src=https://giscus.app/client.js data-repo=leo9827/leo9827.github.io data-repo-id=R_kgDOLn0evw data-category=Announcements data-category-id=DIC_kwDOLn0ev84CeWrD data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=top data-theme=preferred_color_scheme data-lang=zh-CN crossorigin=anonymous async></script></div></article></div><script>document.addEventListener("DOMContentLoaded",function(){const e=document.querySelector(".page-nav");console.log(e.childElementCount);const t=e.firstElementChild.classList.contains("page-next");t?e.classList.add("first-page"):e.classList.remove("first-page");const n=e.childElementCount===1&&e.firstElementChild.classList.contains("page-prev");n?e.classList.add("last-page"):e.classList.remove("last-page")})</script></main><footer><p>&copy; 2025 Leo's Blog. All rights reserved.</p></footer></body><script></script></html>